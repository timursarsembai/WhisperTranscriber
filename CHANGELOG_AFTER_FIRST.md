# Изменения после первого коммита

Документ перечисляет коммиты и добавленный функционал после начального коммита (Initial commit).  
**Последний учтённый коммит:** `c059b0f` (полный hash: `c059b0f69ed83ed51439005a36692e83e7ee3efd`).  
При следующих обновлениях добавляйте новые пункты ниже и обновляйте ID последнего коммита.

---

## Коммиты (от старых к новым)

### 1. `7adf706` — Phase 2: Session, Glossary, Ollama + Settings UI

- **Сессия**: сохранение/загрузка проекта в формате `.wiproject` (SessionService).
- **Глоссарий**: хранение в JSON, формирование initial prompt для Whisper (GlossaryService).
- **Ollama**: коррекция текста через локальную LLM (OllamaService).
- **i18n**: локализация en / es / ru / kk, выбор языка интерфейса во вкладке «Интерфейс».
- **Настройки**: единая правая панель с вкладками «Транскрипция» / «Глоссарий» / «Интерфейс».
- Кастомный тёмный скроллбар для списка языков; список моделей без скролла.
- Подсветка выбора (синяя) для модели, языка и языка UI.
- Обрезка хвостовых галлюцинаций (титры, DimaTorzok и т.п.).
- Кнопки «Экспорт в TXT» и «Коррекция через Ollama» в нижней панели.

---

### 2. `bff8b4e` — UI: локализация, панель настроек, иконки, подсказки

- Локализация интерфейса.
- Панель настроек (вкладки).
- Кнопки с иконками, тултипы.
- Убрана нижняя кнопка Stop.
- Сохранение настроек транскрипции в конфиг.

---

### 3. `200e1f6` — Логика сохранения

- Запрос на сохранение при закрытии только при наличии несохранённых изменений.
- Сохранение в текущий файл проекта без диалога, если путь уже задан.

---

### 4. `8209321` — Запись с микрофона, YouTube, опция глоссария

- Запись с микрофона (обычный и потоковый режим).
- Загрузка аудио с YouTube.
- Исправления потокового режима.
- Опция использования глоссария при записи.

---

### 5. `4e6454a` — Список моделей: удаление по строке

- Удаление модели по красной ссылке в каждой строке.
- Удаление доступно только для уже скачанных моделей.

---

### 6. `6c068ef` — Микрофон: две кнопки, панели, поток, waveform

- Две иконки микрофона, панели внутри окна.
- Кнопки Start/Stop для потоковой записи.
- Waveform (усиление 90), сброс таймера.
- Раскладка: кнопки + таймер + waveform.
- Обновление списка файлов проекта при остановке обычной записи.

---

### 7. `4d34145` — UI панели микрофона и файлов проекта

- Панель микрофона: две колонки, выравнивание микшеров, осциллограф над кнопками, адаптивная ширина.
- Файлы проекта: исправление «Открыть в папке», переименование по месту, прокрутка колесом.
- pycaw в requirements; дедупликация списка устройств.

---

### 8. `e22cddb` — Исправления

- «Открыть в папке»: проводник с корректным путём в кавычках.
- `_update_mic_panel_width` только при Configure корня и с try/except.

---

### 9. `c7784f3` — Выбор языка с флагом

- Выбор языка с эмодзи флага (Segoe UI Emoji).
- Отдельные подписи для флага и названия языка.

---

### 10. `c059b0f` — Словари, строка состояния, обновление списка файлов

- **Глобальные словари**: общий пул словарей (папка приложения), типы correction/terms, DictionaryService.
- **В проекте**: в .wiproject сохраняются только ID включённых словарей (enabled_dictionary_ids).
- **Пресеты**: именованные наборы словарей в конфиге, «Применить» и «Сохранить как пресет».
- **Prompt и постобработка**: terms — в initial_prompt; correction — в prompt и опционально замена в сегментах после транскрипции.
- Вкладка «Словари» вместо «Глоссарий»: список словарей, редактор, включение в проекте, пресеты, чекбокс «Применять исправления после транскрипции».
- Строка состояния внизу окна: время последнего сохранения проекта (дд.мм.гггг чч:мм:сс).
- Кнопка «Обновить» справа от заголовка «Файлы проекта» для обновления списка после ручного добавления файлов в папку.
- Локализация для всех новых строк (dictionaries.*, status.saved_at и др.).

---

## Как пополнять файл

1. Сделайте новые коммиты.
2. Ниже этого блока добавьте новый подзаголовок по образцу: `### N. \`<short_hash>\` — Краткое название`.
3. Перечислите добавленный функционал и изменения.
4. В начале файла замените **«Последний учтённый коммит»** на hash последнего коммита, с которого в следующий раз будете отслеживать изменения.
